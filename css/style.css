/* iOS-26 Visual Upgrade — BAM WebAR */

/* ===== Vars & base ===== */
:root{
  --bg: #0b0b0f;
  --accent: #60a5fa;
  --accent-2: #22d3ee;
  --glass: color-mix(in oklab, white 10%, transparent);
  --border: color-mix(in oklab, white 28%, transparent);
  --shadow: 0 12px 36px rgba(0,0,0,.38);
  --safe-top: env(safe-area-inset-top);
  --safe-bottom: env(safe-area-inset-bottom);
  --safe-left: env(safe-area-inset-left);
  --safe-right: env(safe-area-inset-right);
}

*{ box-sizing:border-box }
html, body, a-scene {
  margin: 0; padding: 0; width: 100%; height: 100%;
  overflow: hidden;
  font-family: Inter, -apple-system, BlinkMacSystemFont, "SF Pro", "Segoe UI", Roboto, sans-serif;
  color: #fff;
}

/* Fondo sutil sobre el canvas AR (renderer alpha:true) */
body{ background: var(--bg); position: relative }
body::before{
  content:""; position:fixed; inset:0; pointer-events:none; z-index:0;
  background:
    radial-gradient(1200px 1200px at 85% -10%,
      color-mix(in oklab, #60a5fa 28%, transparent) 0%, transparent 55%),
    radial-gradient(900px 900px at -10% 110%,
      color-mix(in oklab, #22d3ee 26%, transparent) 0%, transparent 60%);
  opacity:.55;
}

/* Ocultar overlays nativos de MindAR */
.mindar-ui-overlay, .scanning, .scanline { display: none !important; }

/* ===== Loader estilo iOS ===== */
#loader{
  position: fixed; inset:0; z-index:10000;
  display:flex; align-items:center; justify-content:center;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(10px);
}
#loader .spinner{
  width: 46px; height: 46px; border-radius: 50%;
  border: 3px solid color-mix(in oklab, #fff 22%, transparent);
  border-top-color: color-mix(in oklab, var(--accent) 90%, white 10%);
  animation: spin .9s linear infinite;
  margin-bottom: 12px;
}
#loader .loader-text{
  color:#fff; opacity:.9; font-size:14px; letter-spacing:.2px;
  background: linear-gradient(90deg, #fff, color-mix(in oklab, #fff 50%, #60a5fa 50%));
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
@keyframes spin{ to{ transform: rotate(360deg) } }

/* ===== Botón Iniciar (pill con shimmer) ===== */
#start-experience{
  position: fixed; left:50%; top:50%; transform: translate(-50%, -50%);
  width: max-content; max-width: 92vw; text-align:center; white-space: nowrap;
  z-index: 10001; display: none; user-select:none; -webkit-user-select:none;
  padding: 14px 22px; border-radius: 999px;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  color:#0b1220; font-weight:800; font-size:18px; letter-spacing:.2px;
  box-shadow: 0 14px 38px rgba(96,165,250,.45);
  border: 1px solid color-mix(in oklab, #fff 12%, transparent);
}
#start-experience::after{
  content:""; position:absolute; inset:0; border-radius: inherit; pointer-events:none;
  background: linear-gradient(100deg, #ffffff55, #ffffff00 40% 60%, #ffffff55);
  transform: translateX(-120%); filter: blur(6px);
  animation: shimmer 2.8s infinite;
}
#start-experience:active{ transform: translate(-50%, -50%) scale(.98) }
@keyframes shimmer{ to{ transform: translateX(120%) } }

/* ===== HUD Marcador (glass card) ===== */
#marker-info{
  position: fixed;
  top: calc(12px + var(--safe-top));
  right: calc(12px + var(--safe-right));
  z-index: 9999;
  padding: 10px 12px;
  border-radius: 14px;
  background: var(--glass);
  border: 1px solid var(--border);
  backdrop-filter: blur(18px);
  box-shadow: var(--shadow);
  font-weight: 600; font-size: 13px;
  display:flex; align-items:center; gap:10px;
  animation: markerFadeIn .6s ease;
}
#marker-info::before{
  content:"";
  width:8px; height:8px; border-radius:50%;
  background: color-mix(in oklab, #34d399 80%, white 20%);
  box-shadow: 0 0 0 6px color-mix(in oklab, #34d399 22%, transparent);
}
/* Entrada suave */
@keyframes markerFadeIn{ from{opacity:0; transform: translateY(-8px)} to{opacity:1; transform:none} }

/* ===== Error de cámara (glass panel) ===== */
#cam-error{
  position: fixed; inset:0; z-index:9999; display:none;
  padding: max(24px, var(--safe-top)) 24px max(24px, var(--safe-bottom));
  display:flex; align-items:center; justify-content:center; text-align:center;
  background: linear-gradient(180deg, rgba(0,0,0,.85), rgba(0,0,0,.65));
  backdrop-filter: blur(12px);
  color: #fff; font-size: 1.05rem;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
  border-top: 1px solid rgba(255,255,255,.12);
}
#cam-error{
  border-radius: 0;
}

/* ===== Reactivar sonido (por compatibilidad) ===== */
#reactivar-sonido{
  position: fixed;
  bottom: calc(90px + var(--safe-bottom));
  left: 50%; transform: translateX(-50%);
  z-index: 10000;
  background: var(--glass);
  color:#fff;
  padding: 12px 20px; border-radius: 16px;
  font-weight: 700; font-size: 16px;
  backdrop-filter: blur(12px);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  cursor: pointer;
  display: none;
  animation: fadeIn .45s ease;
}

/* ===== Accesibilidad / motion ===== */
@keyframes fadeIn{ from{opacity:0; transform: translateY(12px)} to{opacity:1; transform:none} }
@media (prefers-reduced-motion: reduce){
  #start-experience::after, #loader .spinner{ animation: none }
}

/* ===== iOS Safari height quirks ===== */
html, body{
  min-height: 100%;
  min-height: -webkit-fill-available; /* iOS Safari */
}

/* ===== A-Frame canvas debajo de UI ===== */
a-scene{ z-index:1; position: relative }
